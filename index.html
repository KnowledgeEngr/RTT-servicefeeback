
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Submitting Feedback...</title>
  <script>
    function getQueryParams() {
      const params = new URLSearchParams(window.location.search);
      return {
        response: params.get("response"),
        id: params.get("id"),
        user: params.get("user")
      };
    }

    async function sendPost() {
  const payload = getQueryParams();
  const flowUrl = "https://<your-flow-url>";

  try {
    const res = await fetch(flowUrl, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    const result = await res.text();

    if (result.includes("Already submitted")) {
      document.querySelector("h1").textContent = "Already submitted!";
      document.querySelector("p").textContent = "You have already sent feedback.";
    }

  } catch (e) {
    console.error("Failed to send feedback:", e);
  } finally {
    setTimeout(() => {
      window.location.href = "https://knowledgeengr.github.io/RTT-servicefeedback/";
    }, 2000);
      }
    }

    window.onload = sendPost;
  </script>
</head>
<body style="font-family: sans-serif; text-align: center; padding-top: 100px;">
  <div>
    <h1><strong>Thank you!</strong></h1>
    <p style="font-size: 1.25em; margin-top: -10px;">
      Your response has been recorded.</p>
   </div>
  <noscript>
    <p>This page requires JavaScript to work.</p>
  </noscript>
</body>
</html>
